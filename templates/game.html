<!DOCTYPE html>
<html lang="en">

<head>
	<title>Game</title>
	{% load static %}
	<link rel="stylesheet" href="{% static 'game.css' %}">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
	<h1>Game ID: {{game.uuid}}</h1>
	<div class="info">
		<h2 id="playerA">Player A</h2>
		<h2 id="playerB">Player B</h2>
	</div>

	{% if game.userRole == "A" %}
		<div class="info">
			<p>{{user}}</p>
			<p>{{game.agent.agentType}}</p>
		</div>
		<div class='moves'>
			<div class="user">
				<p class="left" id="userMove">
					{% if game.userMove is not None %}
						{{game.userMove}}
					{% endif %}
				</p>
			</div>
			<div class="form">
				<form
					type="range"
					id="djangoForm"
					method="POST"
					updateURL="{% url 'updateGame' %}">
						{% csrf_token %} 
						{{form.as_p}}
				</form>
				<input type="submit" id="submitButton" form="djangoForm">
			</div>
			<div class='agent'>
				<p class="right" id="agentMove">
					{% if game.agentMove is not None %}
						{{game.agentMove}}
					{% endif %}
				</p>
			</div>
		</div>
		<div class="info">
			<p id="userMoves">{{game.userMoves}}</p>
			<p id="agentMoves">{{game.agentMoves}}</p>
		</div>

	{% else %}
		<div class="info">
			<p>{{game.agent.agentType}}</p>
			<p>{{user}}</p>
		</div>
		<div class='moves'>
			<div class='agent'>
				<p class="left" id="agentMove"></p>
			</div>
			<div class="send">
				<input class="send" type="submit" id="submitButton" form="djangoForm" value="send 0"/>
			</div>
			<div class="user">
				<form type="range" id="djangoForm" method="POST">
					{% csrf_token %}
					<input type="hidden" name="gameID" value="{{game.id}}" />
					{{form.as_p}}
				</form>
				<p class="right" id="userMove"></p>
			</div>
		</div>
		<div class="info">
			<p id="agentMoves"></p>
			<p id="userMoves"></p>
		</div>		
	{% endif %}

	<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
	<script type="text/javascript">
		//pass django variables to external javascript
		let homeURL = "{% url 'home' %}";
		let gameURL = "{% url 'game' %}";
	</script>
	<script src="{% static 'game.js' %}"></script>
</body>
</html>
